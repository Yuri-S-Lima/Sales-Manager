{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { InputBusca } from \"../components/InputBusca\";\nimport { Styles } from \"../components/Styles\";\nimport { TypeText } from \"../components/TypeText\";\nimport { ButtonOne } from \"../components/ButtonOne\";\nimport { FormInput } from \"../components/FormInput\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { db } from \"../util/Firebase\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function BuscarCliente(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      buscado = _useState2[0],\n      setBusca = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      id = _useState4[0],\n      setId = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      msg = _useState6[0],\n      setMsg = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      Divida = _useState8[0],\n      setDivida = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      Lucro = _useState10[0],\n      setLucro = _useState10[1];\n\n  var _useContext = useContext(AuthContext),\n      user = _useContext.user;\n\n  function busca() {\n    var nomes = [];\n    var ids = [];\n    var divs = [];\n\n    function loadClientes() {\n      return _regeneratorRuntime.async(function loadClientes$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(db.collection('Usuários').doc(user.uid).collection('Clientes').get().then(function (querySnapshot) {\n                querySnapshot.docs.forEach(function (doc) {\n                  nomes.push(doc.data().Nome);\n                  ids.push(doc.id);\n                  divs.push(doc.data().Divida);\n                }, db.doc('Usuários/' + user.uid).get().then(function (doc) {\n                  if (doc.exists) {\n                    setLucro(doc.data().Lucro);\n                  }\n                }));\n                var pos = nomes.indexOf(buscado);\n\n                for (var i = 0; i < ids.length; i++) {\n                  if (i === pos) {\n                    console.log(ids[i]);\n                    var _id = ids[i];\n                    var div = divs[i];\n                    setId(_id);\n                    setDivida(div);\n                    setMsg('Cliente encontrado!');\n                  }\n                }\n              }));\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    loadClientes();\n  }\n\n  function AddProduto() {\n    console.log(id);\n    navigation.navigate('AddProduto', {\n      verifica: false,\n      buscado: id,\n      div: Divida,\n      lucro: Lucro\n    });\n  }\n\n  return _jsx(View, {\n    style: {\n      flex: 1\n    },\n    children: _jsxs(SafeAreaView, {\n      style: {\n        flex: 1,\n        marginHorizontal: 25,\n        marginVertical: 50\n      },\n      children: [_jsx(View, {\n        children: _jsx(TypeText, {\n          textTitle: \"Buscar Cliente\"\n        })\n      }), _jsx(Text, {\n        style: Styles.textSocial,\n        children: msg\n      }), _jsxs(View, {\n        style: {\n          flex: 1,\n          justifyContent: 'center'\n        },\n        children: [_jsx(InputBusca, {\n          buscaTitulo: \"Buscar Cliente\",\n          image: true,\n          onChangeText: function onChangeText(text) {\n            return setBusca(text);\n          },\n          onPress: busca\n        }), _jsx(View, {\n          style: {\n            marginTop: 118,\n            alignItems: 'center'\n          },\n          children: _jsx(ButtonOne, {\n            title: \"Prosseguir\",\n            onPress: AddProduto\n          })\n        })]\n      })]\n    })\n  });\n}","map":{"version":3,"sources":["/home/yuri/Programação/React/sales-manager/src/screens/BuscarCliente.js"],"names":["React","useState","useContext","useEffect","InputBusca","Styles","TypeText","ButtonOne","FormInput","AuthContext","db","BuscarCliente","navigation","buscado","setBusca","id","setId","msg","setMsg","Divida","setDivida","Lucro","setLucro","user","busca","nomes","ids","divs","loadClientes","collection","doc","uid","get","then","querySnapshot","docs","forEach","push","data","Nome","exists","pos","indexOf","i","length","console","log","div","AddProduto","navigate","verifica","lucro","flex","marginHorizontal","marginVertical","textSocial","justifyContent","text","marginTop","alignItems"],"mappings":"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","sourcesContent":["import React ,{ useState, useContext, useEffect } from \"react\";\nimport { View, SafeAreaView, TouchableOpacity, Text } from 'react-native';\nimport { InputBusca } from \"../components/InputBusca\";\nimport { Styles } from \"../components/Styles\";\nimport { TypeText } from \"../components/TypeText\";\nimport { ButtonOne } from \"../components/ButtonOne\";\nimport { FormInput } from \"../components/FormInput\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { db } from \"../util/Firebase\";\n\nexport function BuscarCliente({navigation}){\n\n    const [buscado, setBusca] = useState('');\n    const [id, setId] = useState('');\n    const [msg, setMsg] = useState(null);\n    const [Divida, setDivida] = useState(null);\n    const [Lucro, setLucro] = useState(null);\n\n    const { user } = useContext(AuthContext);\n\n    function busca(){\n        let nomes = [];\n        let ids = []\n        let divs = []\n        async function loadClientes() {\n            await db.collection('Usuários').doc(user.uid).collection('Clientes').get().then(querySnapshot => {\n                querySnapshot.docs.forEach(doc => {\n                    nomes.push(doc.data().Nome);\n                    ids.push(doc.id);\n                    divs.push(doc.data().Divida);\n                },\n                    db.doc('Usuários/' + user.uid).get().then( // percorre o bd\n                        doc=>{\n                            if(doc.exists){ \n                                setLucro(doc.data().Lucro);\n                            }\n                        }\n                    )\n                );\n\n                let pos = nomes.indexOf(buscado);\n\n                for(var i = 0; i < ids.length; i++){\n                    if(i === pos){\n                        console.log(ids[i])\n                        let id = ids[i];\n                        let div = divs[i]\n                        setId(id);\n                        setDivida(div);\n                        setMsg('Cliente encontrado!');\n                    }\n                }\n\n            });\n    \n        }\n\n        loadClientes();\n    }\n\n    function AddProduto(){\n        console.log(id);\n        navigation.navigate('AddProduto', {verifica: false, buscado: id, div: Divida, lucro: Lucro});\n    }\n\n    return(\n        <View style = {{flex: 1}}>\n            <SafeAreaView style = {{flex:1, marginHorizontal: 25, marginVertical: 50}}>\n                <View>\n                    <TypeText textTitle = 'Buscar Cliente'/>\n                </View>\n                <Text style = {Styles.textSocial}>{msg}</Text>\n                <View style = {{flex:1, justifyContent:'center'}}>\n                    <InputBusca buscaTitulo = 'Buscar Cliente' image = {true} onChangeText = {text => setBusca(text)} onPress = {busca} />\n                    <View style = {{marginTop: 118, alignItems: 'center'}}>\n                        <ButtonOne title = 'Prosseguir' onPress = {AddProduto}  />\n                    </View>\n                </View>         \n            </SafeAreaView>\n        </View>\n    );\n}"]},"metadata":{},"sourceType":"module"}